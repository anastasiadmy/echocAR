<!DOCTYPE html>
<html>
<head>
<title>Echocardiography Ultrasound Form</title>
<style>
body {
  font-family: sans-serif;
  padding: 10px;
}

label {
  display: block;
  margin-bottom: 5px;
}

input[type="text"], input[type="number"], select {
  width: 100%;
  padding: 10px;
  margin-bottom: 15px;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-sizing: border-box;
}

#results {
  margin-top: 20px;
  font-weight: bold;
}

.highlighted {
  background-color: yellow;
}

/* Mobile Responsive Styles */
@media (max-width: 600px) {
  body {
    padding: 5px;
  }

  h1, h2 {
    font-size: 1.5em;
  }

  input[type="text"], input[type="number"], select {
    padding: 8px;
    margin-bottom: 10px;
  }

  #results p {
    font-size: 1em;
  }

  select {
    font-size: 14px;
    padding: 5px 25px;
    background-position: right 5px center;
    background-size: 1.2em 1.2em;
  }

  select option {
    font-size: 14px;
  }
}

/* Desktop Styles */
@media (min-width: 600px) {
  input[type="text"], input[type="number"], select {
    width: 200px;
  }

  h1, h2 {
    font-size: 2em;
  }

  select {
    font-size: 16px;
    padding: 5px 10px;
    background-position: right 10px center;
    background-size: 1.5em 1.5em;
  }

  select option {
    font-size: 16px;
  }
}

</style>
</head>
<body>

<h1>Echocardiography Ultrasound Form</h1>

<label for="patient_name">Patient Name:</label>
<input type="text" id="patient_name" name="patient_name" required><br><br>

<label for="sex">Sex:</label>
<select id="sex" name="sex" oninput="calculate()">
  <option value="male">Male</option>
  <option value="female">Female</option>
</select>

<label for="height">Height (cm):</label>
<input type="number" id="height" name="height" oninput="calculate()">

<label for="weight">Weight (kg):</label>
<input type="number" id="weight" name="weight" oninput="calculate()">

<div id="results">
  <p>BSA: <span id="bsa"></span> m²</p>
</div>
<h2>Aorta</h2>
<label for="lvot_anulus">LVOT/Anulus (mm):</label>
<input type="number" class="highlighted" id="lvot_anulus" name="lvot_anulus"><br>
<label for="sinus">Sinus (mm):</label>
<input type="number" class="highlighted" id="sinus" name="sinus"><br>
<label for="ac_aorta">Ac aorta (mm):</label>
<input type="number" class="highlighted" id="ac_aorta" name="ac_aorta"><br>
<label for="la_diametr">LA diametr (mm):</label>
<input type="number" class="highlighted" id="la_diametr" name="la_diametr"><br>
<h2>ЛШ</h2>
<label for="lvedd">КДР (cm\m):</label>
<input type="number" id="lvedd" placeholder=" ≤ f 53 m 59 " name="lvedd" oninput="calculate()">

<label for="lvesd">КСР (mm):</label>
<input type="number" id="lvesd" name="lvesd" oninput="calculate()">

<label for="ivsd">МШП (cm):</label>
<input type="number" id="ivsd" name="ivsd" oninput="calculate()">

<label for="pwtd">ЗС (cm):</label>
<input type="number" id="pwtd" name="pwtd"  oninput="calculate()">



<div id="results">
  <p>LV Mass: <span id="lv_mass"></span> g</p> 
  <p>LVMI: <span id="lvmi"></span> g/m²</p>
  <p>RWT: <span id="rwt"></span></p>
  <p>КДО: <span id="edv"></span> ml</p>
  <p>КСО: <span id="esv"></span> ml</p>
  <p>УО: <span id="sv"></span> ml</p> 
  <p>ФВ: <span id="ef"></span> %</p>
</div>
<label for="acct">ACCT (ms):</label>
<input type="number" class="highlighted" id="acct" name="acct"><br>
<h2>А4С</h2>

<label for="la_volume">LA Volume (ml):</label>
<input type="number" id="la_volume" placeholder=" індекс ≤ 34 "name="la_volume" oninput="calculate()">
<div id="results">
  <p>LAVI: <span id="lavi"></span> ml/m²<span id="lavi_interpretation"></span></p>
</div>
<label for="ef_simpson">EF Simpson (%):</label>
<input type="number" id="ef_simpson" name="ef_simpson"><br>

<label for="mid">ПШ (mm):</label>
<input type="number" class="highlighted" id="mid" name="mid"><br>
<label for="pp">ΠΠ:</label>
<input type="number" class="highlighted" id="pp" name="pp"><br>
<label for="e_a">E/A:</label>
<input type="text" class="highlighted" id="e_a" name="e_a"><br>



<div class="observations">
  <h2>МК</h2>
  <input type="text" id="mk_zminen" name="mk_zminen"><br>
  <td colspan="2">Регургітація: <select name="m_reg">
          <option value="dd1">--</option>
          <option value="dd1">мінімальна регургітація</option>
          <option value="dd2">легка регургітація</option>
          <option value="dd3">помірна регургітація</option>
          <option value="dd">важка регургітація</option>
      </select></td>
  
  <td colspan="2">Стулки: <select name="m_reg">
          <option value="dd1">--</option>
          <option value="dd1">пролапс</option>
          <option value="dd2">фіброз</option>
          <option value="dd3">кальциноз</option>
      </select></td>

  <h2>АК</h2>
  <input type="text" id="ak_zminen" name="ak_zminen"><br>

      <label for="ak_max_grad">АК макс град і шв:</label>
      <input type="number" class="highlighted" id="ak_max_grad" name="ak_max_grad"><br>
      <input type="number" class="highlighted" id="ak_max_grad" name="ak_max_grad"><br>
                  
  <td colspan="2">Стулки кількість: <select name="m_reg">
          <option value="dd1">--</option>
          <option value="dd1">тристулковий</option>
          <option value="dd2">двостулковий</option>                    
      </select></td>
                  
  <td colspan="2">Стулки: <select name="m_reg">
          <option value="dd1">--</option>            
          <option value="dd3">фіброз</option>
          <option value="dd3">кальциноз</option>
      </select></td>
  
  
  <td colspan="2">Регургітація: <select name="m_reg">
          <option value="dd1">--</option>
          <option value="dd2">легка регургітація</option>
          <option value="dd3">помірна регургітація</option>
          <option value="dd">важка регургітація</option>
      </select></td>


  <h2>ТК</h2>
<input type="text" id="tk_regurgitatsiya" name="tk_regurgitatsiya"><br>
<td colspan="2">
Регургітація: 
<select name="m_reg" id="m_reg">
<option value="non">--</option>
<option value="dd1">мінімальна регургітація</option>
<option value="dd2">легка регургітація</option>
<option value="dd3">помірна регургітація</option>
<option value="dd4">важка регургітація</option>
</select>
</td>

<div id="additionalFields" style="display: none;">
<label for="max_gradient">Max Gradient:</label>
<input type="number" id="max_gradient" name="max_gradient"><br>
<label for="max_velocity">Max Velocity:</label>
<input type="number" id="max_velocity" name="max_velocity">
</div>

<script>
const mRegSelect = document.getElementById('m_reg');
const additionalFields = document.getElementById('additionalFields');

mRegSelect.addEventListener('change', function() {
if (this.value !== 'non') {
additionalFields.style.display = 'block';
} else {
additionalFields.style.display = 'none';
}
});
</script>
 
  
  <td colspan="2">Стулки: <select name="m_reg">
          <option value="dd1">--</option>
          <option value="dd2">фіброз</option>
          <option value="dd3">кальциноз</option>
      </select></td>

  <h2>к.ЛА</h2>
  <input type="text" id="kl_la_zminen" name="kl_la_zminen"><br>
  
  <td colspan="2">Регургітація: <select name="m_reg">
          <option value="dd1">--</option>
          <option value="dd1">мінімальна регургітація</option>
          <option value="dd2">легка регургітація</option>
          <option value="dd3">помірна регургітація</option>
          <option value="dd">важка регургітація</option>
      </select></td>
  

  <h2>НПВ</h2>
  <input type="text" id="IVC" name="IVC"><br>

  <td colspan="2">Спадається: <select name="m_reg">
          <option value="dd1">--</option>
          <option value="dd2">більше 75</option>
          <option value="dd3">більше 50</option>
          <option value="dd">менше 50</option>
          <option value="dd4">менше 20</option>
      </select></td>

  <label for="lokalna_skorotliva">Локальна скоротлива здатність:</label>
  <input type="text" class="highlighted" id="lokalna_skorotliva" name="lokalna_skorotliva"><br>
  <label for="perikard">Перикард:</label>
  <input type="text" class="highlighted" id="perikard" name="perikard"><br>
</div>

<style>
  .highlighted {
background-color: yellow;
}
  /* Styling for the select element */
select {
appearance: none; /* Remove default arrow */
-webkit-appearance: none; /* For Safari */
-moz-appearance: none; /* For Firefox */
background-color: #fff; /* Set background color */
border: 1px solid #ccc; /* Add border */
padding: 5px 10px; /* Adjust padding */
font-size: 16px; /* Set font size */
border-radius: 5px; /* Add rounded corners */
width: 100%; /* Make select full-width */
box-sizing: border-box; /* Include padding and border in width */
background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3e%3cpath fill='rgba(51, 51, 51, 1)' d='M7 10l5 5 5-5z'/%3e%3c/svg%3e"); /* Add custom arrow */
background-repeat: no-repeat;
background-position: right 10px center;
background-size: 1.5em 1.5em;
padding-right: 30px; /* Adjust padding to make space for arrow */
cursor: pointer; /* Make cursor pointer on hover */
}

/* Style the options */
select option {
font-size: 16px; /* Set font size */
padding: 5px; /* Add padding */
}

/* Hover effect for options */
select option:hover {
background-color: #f0f0f0; /* Add hover background color */
}

/* Focus style for select */
select:focus {
outline: none; /* Remove default outline */
border-color: #4CAF50; /* Highlight border on focus */
box-shadow: 0 0 5px rgba(76, 175, 80, 0.3); /* Add a subtle shadow */
}

/* Disable default select arrow in IE */
select::-ms-expand {
display: none;
}

/* Mobile Responsive Styles */
@media (max-width: 600px) { /* Adjust breakpoint as needed */
select {
  font-size: 14px; /* Slightly smaller font size on mobile */
  padding: 5px 25px; /* Adjust padding for smaller screens */
  background-position: right 5px center; /* Position arrow */
  background-size: 1.2em 1.2em; /* Adjust arrow size */
}

select option {
  font-size: 14px; /* Slightly smaller font size on mobile */
}

/* You can add other mobile-specific styles here */
}

/* Specific style for the "m_reg" select */
select[name="m_reg"] {
/* Add any specific styles you want for this select */
border-color: #007bff; /* Example: highlight the border */
}

/* Mobile Responsive Styles (Specific for m_reg) */
@media (max-width: 600px) {
select[name="m_reg"] {
  /* Add any specific mobile styles for this select */
  font-size: 12px; /* Example: smaller font on mobile */
}
}
</style>
<script>
function calculate() {
  const sex = document.getElementById("sex").value;
  const height = parseFloat(document.getElementById("height").value);
  const weight = parseFloat(document.getElementById("weight").value);
  const lvedd = parseFloat(document.getElementById("lvedd").value);
  const lvesd = parseFloat(document.getElementById("lvesd").value);
  const ivsd = parseFloat(document.getElementById("ivsd").value);
  const pwtd = parseFloat(document.getElementById("pwtd").value);
  const la_volume = parseFloat(document.getElementById("la_volume").value);

    let bsa = NaN;
    let lv_mass = NaN;
    let lvmi = NaN;
    let rwt = NaN;
    let lavi = NaN;
    let edv = NaN;
    let esv = NaN;
    let sv = NaN;
    let ef = NaN;

    if (!isNaN(height) && !isNaN(weight)){
        bsa = Math.sqrt((height * weight) / 3600);
    }

    if (!isNaN(lvedd) && !isNaN(ivsd) && !isNaN(pwtd)){
        lv_mass = 0.8 * (1.04 * ((lvedd + ivsd + pwtd)**3 - lvedd**3)) + 0.6;
    }

    if (!isNaN(lv_mass) && !isNaN(bsa) && bsa > 0) {
        lvmi = lv_mass / bsa;
    }

    if (!isNaN(ivsd) && !isNaN(lvedd) && lvedd > 0) {
        rwt = (2 * ivsd) / lvedd;
    }

    if (!isNaN(la_volume) && !isNaN(bsa) && bsa > 0) {
        lavi = la_volume / bsa;
    }

    // Teichholz Formulas (using mm for LVEDD and LVESD - converting to cm inside the formula)
    if (!isNaN(lvedd)){
        edv = (Math.PI * (lvedd/10)**3) / 6; //Converting mm to cm for volume calculation
    }

    if (!isNaN(lvesd)){
        esv = (Math.PI * (lvesd/10)**3) / 6; //Converting mm to cm for volume calculation
    }

    if (!isNaN(edv) && !isNaN(esv)){
        sv = edv - esv;
    }

    if (!isNaN(sv) && !isNaN(edv) && edv > 0){
        ef = (sv / edv) * 100;
    }



  document.getElementById("bsa").textContent = isNaN(bsa) ? "" : bsa.toFixed(2);
  document.getElementById("lv_mass").textContent = isNaN(lv_mass) ? "" : lv_mass.toFixed(2);
  document.getElementById("lvmi").textContent = isNaN(lvmi) ? "" : lvmi.toFixed(2);
  document.getElementById("rwt").textContent = isNaN(rwt) ? "" : rwt.toFixed(2);
  document.getElementById("lavi").textContent = isNaN(lavi) ? "" : lavi.toFixed(2);
  document.getElementById("edv").textContent = isNaN(edv) ? "" : edv.toFixed(2);
  document.getElementById("esv").textContent = isNaN(esv) ? "" : esv.toFixed(2);
  document.getElementById("sv").textContent = isNaN(sv) ? "" : sv.toFixed(2);
  document.getElementById("ef").textContent = isNaN(ef) ? "" : isNaN(ef) ? "" : ef.toFixed(2);

}

// Initial calculation (in case of pre-filled values)
calculate();


</script>

  
</body>
</html>
